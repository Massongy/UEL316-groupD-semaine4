{% extends 'base.html.twig' %}

{% block title %}{{ post.titre }}{% endblock %}

{% block body %}

<div class="container mt-5">

    <h1 class="mb-4">{{ post.titre }}</h1>

    <div class="mb-5">
        {{ post.contenu|raw }}
    </div>

    <hr>

    <h2 class="mt-4">Commentaires</h2>

    {% for comment in post.comments %}
        <div class="card mb-3 p-3">
            <p class="mb-1">
                <strong>{{ comment.user.prenom }} {{ comment.user.nom }}</strong>
                <small class="text-muted">
                    - {{ comment.createdAt|date('d/m/Y H:i') }}
                </small>
            </p>

            <p>{{ comment.contenu }}</p>

            {% if app.user %}
                <a class="text-danger" href="{{ path('front_comment_signal', {id: comment.id}) }}">
                    Signaler
                </a>
            {% endif %}
        </div>
    {% else %}
        <p>Aucun commentaire.</p>
    {% endfor %}

    <hr>

    <h3 class="mt-4">Ajouter un commentaire</h3>

    {% if app.user %}
        {{ form_start(commentForm) }}
            {{ form_widget(commentForm) }}
            <button class="btn btn-primary mt-2">Publier</button>
        {{ form_end(commentForm) }}
    {% else %}
        <p>Vous devez être connecté pour commenter.</p>
    {% endif %}

</div>

{% endblock %}
